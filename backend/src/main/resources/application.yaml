spring:
  application:
    name: qsolog-backend

  # R2DBC Configuration (Reactive Database)
  r2dbc:
    url: ${DB_URL:r2dbc:postgresql://localhost:5432/qsolog}
    username: ${DB_USER:qsolog}
    password: ${DB_PASS:qsolog}
    pool:
      enabled: true
      initial-size: 10
      max-size: 20

  # Flyway Configuration (Migrations via JDBC)
  # Disabled by default for Step 1 - will be enabled in Step 2 when DB schema is added
  flyway:
    enabled: ${FLYWAY_ENABLED:false}
    url: ${DB_URL_JDBC:jdbc:postgresql://localhost:5432/qsolog}
    user: ${DB_USER:qsolog}
    password: ${DB_PASS:qsolog}
    baseline-on-migrate: true
    locations: classpath:db/migration

  # Security Configuration (placeholder for JWT in later steps)
  security:
    user:
      name: admin
      password: admin
      roles: ADMIN

# CORS Configuration
cors:
  allowed-origins: ${CORS_ORIGINS:http://localhost:4200}
  allowed-methods: GET,POST,PUT,DELETE,OPTIONS,PATCH
  allowed-headers: "*"
  allow-credentials: true
  max-age: 3600

# JWT Configuration (placeholder for Step 3)
jwt:
  secret: ${JWT_SECRET:CHANGE_THIS_SECRET_IN_PRODUCTION_MIN_256_BITS}
  expiration: 86400000 # 24 hours in milliseconds

# Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: health,info
      base-path: /actuator
  endpoint:
    health:
      show-details: when-authorized
  health:
    defaults:
      enabled: true

# OpenAPI/Swagger Configuration
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    operationsSorter: method
    tagsSorter: alpha

# Logging Configuration
logging:
  level:
    root: INFO
    com.pl.shugo.gsolog: DEBUG
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    io.r2dbc.postgresql: DEBUG

# Server Configuration
server:
  port: ${SERVER_PORT:8080}
